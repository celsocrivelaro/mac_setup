---
- name: install fish shell
  package:
    name: fish
    state: installed

- name: set fish as one of bashes
  command: "echo '/usr/local/bin/fish' | sudo tee -a /etc/shells"
  become: true
  when: ansible_os_family == "Darwin"

- name: get fish location
  shell: which fish
  register: fish_location

- name: Set fish as default shell
  user: name={{ user }} shell={{ fish_location.stdout }}

- name: set fish prompt configurations
  template:
    src: fish_prompt.fish.j2
    dest: "{{ ansible_env.HOME }}/.config/fish/functions/fish_prompt.fish"
  tags: 
    - update

- name: set fish configurations
  template:
    src: config.fish.j2
    dest: "{{ ansible_env.HOME }}/.config/fish/functions/config.fish"
  tags: 
    - update
